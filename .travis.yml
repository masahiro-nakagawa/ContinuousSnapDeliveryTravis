language: shell
dist: focal
os: linux
env:
  global:
  - SNAPCRAFT_BUILD_ENVIRONMENT: lxd
  - secure: chYs0QUpfWMzCdLG/uUiIMcLNlJ0tvSXXvXYcYz4sSK0E7FhUI6u0XEKv0EcgUst0c8i71Ix9PUBQg+jDGGxC9AxJnP3sfA3ydbMx/dY3N6f3m94ZBRqG7yp+smf0bn+LQqcGDEGxM/mLmJnKA3cYmUDrmkMTtikAagHNAO0m9l54fO8FqmpAiif4i70nYSud2nLB8Bz8P1Bmc93iRFkYoKYrm5cqPJqwv/IYHx1SLT41fMGRURqf4PxpYzljYUZ5AhtjZoq/WrdeYJGhZf0Z27Yc8EZ1p60IiHblyvZLhsG6hnZ14LfuD0FlzxLCIFde+F3VcSMWOyMln6j3ZrDj14NpV0ED0u1uKUanBGjbLsxAsKlfTDGoxTqu3T+uq7j/NBb/CpRYi7t4khcbPL9DfFQmm/fGfz32VJPULe4ncIipLMAQRErkpCQOZ2d1Lm/O7vDqr7j+o7qWkRKZxOkcn+8b5PH8vV2DP6h/xgopA+ct227LxdXGDg6vFgMHvDNg1uMvP+NuJbZH7S29SF+px1Kdv7dbU62ZljZSm8ZVp9GM7b1VmONT1NlBZSTdUdQWIryQ9GeOQ6TzUk2LxMmwc9D2iLhhqZ1ObZTuA607IV1m2eOQ0iGsa/wyqAt9pCYyUN7ZsOzrwKvkhX4WTyjrn5RxNmHqjH8bIIeGIw1zWY=
  - secure: iDw/hcMv8z+q3appHV1OMaB7I+PngjWkCVaTzvD6MZnq+j2PLsHkbljqPcFK6J65ABWYiIl2uN282RgG/gqrI3sEqYCqiVpGArHOTjP/DrRVQx8uKLZxJxKeLrXLnudg73wv84I/AXDr+brrRSP3Oonn9Br8B78Lhl0hlfy2dBcIkEEB1cVuBq1NmOf1oeqBdSeqOfT2WFjlAvyOMTWBtdVF3vjP1aDvqJiFtxyJPjege2PZtLc4wDDabNIvUKlmd1Q4nC1SPwyA0QsMX5LVpr8xs2LYpG2UbO+pdhQdFxB5UFlLfd3vqFJrX+oNgHF/bAcjxc+nAdJPBR3Ax7sAA5VFhtpHHheISrWduVfwT3RLdn4Sc++sdZICcq8Tgofv2S2gWcSRwCj/yGAU7hDa11k6jUELx6yJDppGjukpKAQgk1pJDSDsfDYIgMM5IMUALNuO371rg4qfDEkTdlVlbnRfp8WzgD0G8hIG5G+tG2735ygXID06yahn0QI8vTQN3hG6N4SrD1yGgZ60kQbqBdG0WNTf8qTWoBl3TCDTaFYcENTtQuuzgHByfkKLWf9FVd9wRBt/qSX3R1Ig/lwPJym3KkkGS9ft+ep1kJeJTBy+FUfXDtu1ydfUvHc/30E2l+VOzR7FEhyWrqrOmSFycx+Rr28BT5LZ3zqvN1kA24k=
before_install:
- echo $super_secret_password
- echo $super_secret_password | gpg --passphrase-fd 0 hello-masahiro.gpg
addons:
  snaps:
  - name: snapcraft
    channel: stable
    confinement: classic
  - name: lxd
    channel: stable
script:
- 
- echo .travis.yml
- pwd
- sudo usermod --append --groups lxd $USER
- groups
- sudo /snap/bin/lxd.migrate -yes
- sudo /snap/bin/lxd waitready
- sudo /snap/bin/lxd init --auto
- sg lxd -c snapcraft
- echo " ----Deploy-----"
- echo $SNAP_TOKEN
- echo $SNAP_TOKEN | snapcraft login --with -
- snapcraft whoami
- snapcraft upload --release=edge hello-hirotravis_2.10_amd64.snap
after_failure:
- sudo journalctl -u snapd
